import os

# 要检查的文件列表
files_to_check = ['train.txt', 'test.txt', 'dev.txt']

# 遍历每个文件
for file_path in files_to_check:
    # 读取原始数据
    with open(file_path, 'r') as file:
        lines = file.readlines()
    
    # 创建一个列表来保存有效的行
    updated_lines = []

    # 检查每一行的图片是否有对应的标签文件
    for line in lines:
        # 假设路径的前缀和图像与标签的存储方式
        image_path = line.strip()
        label_path = image_path.replace('.jpg', '.txt').replace('.png', '.txt')
        
        # 检查标签文件是否存在
        if os.path.exists(label_path):
            updated_lines.append(line)

    # 将更新后的行写回到文件
    with open(file_path, 'w') as file:
        file.writelines(updated_lines)
