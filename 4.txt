def get_local_pdf(pdf_path):
    doc = fitz.open(pdf_path)
    # 合并PDF文档的所有页面文本
    full_text = ""
    pages_text = {}
    
    for page_num in range(len(doc)):
        page = doc.load_page(page_num)
        blocks = page.get_text("dict")["blocks"]
        page_text = ""

        for block in blocks:
            # 如果是文本块
            if "lines" in block:
                for line in block["lines"]:
                    for span in line["spans"]:
                        page_text += span["text"]
            # 如果是图片块
            elif "image" in block:
                page_text += "[png]"
        
        full_text += page_text + "\n"  # 添加换行符作为页面间的分隔
        pages_text[page_num] = page_text
    
    return full_text, pages_text
