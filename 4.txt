
def correct_line_breaks2(text):
    """Modify incorrectly cut links, attempting to intelligently recombine them."""
    lines = text.split('\n')
    combined_line = ""
    corrected_lines = []
    
    # Improved regex to detect the start of URLs or potential continuation of URLs
    key_fragments_start = re.compile(r'(https?|ftp|file)://|www\.')
    key_fragments_end = re.compile(r'\.com|\.org|\.net|\.html|\.pdf|\.xls|\.xlsx|\.mp3|\.docx|%[0-9A-Fa-f]{2}|servicenow|confluence\+|id=')
    
    for line in lines:
        stripped_line = line.strip()
        
        # Check if the current line should be part of the previous line (likely a URL)
        if combined_line and ((key_fragments_start.search(combined_line) and not key_fragments_end.search(combined_line)) or \
                             key_fragments_start.search(stripped_line) or \
                             key_fragments_end.search(stripped_line)):
            combined_line += stripped_line
        else:
            if combined_line:
                corrected_lines.append(combined_line)
            combined_line = stripped_line
    
    if combined_line:
        corrected_lines.append(combined_line)
    
    # Join lines with '\n' to maintain original line breaks except for URLs
    formatted_text = '\n'.join(corrected_lines)
    return formatted_text
